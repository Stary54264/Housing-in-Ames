---
title: "Housing in Ames"
author: "Yanzun Jiang, Siyuan Lu, Yi Tang"
date: today
date-format: long
thanks: "Code and data supporting this proposal is available at: <https://github.com/Stary54264/Housing-in-Ames>"
format: pdf
number-sections: true
toc: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(knitr)
```

\newpage

# Introduction

<<<<<<< Updated upstream
Understanding the relationships between variables that influence house prices can provide deeper insights for various stakeholders, including homeowners, potential buyers, real estate agents, and policymakers, to make better decisions. Accurate prediction of house prices helps to make informed decisions about buying, selling and investing in real estate. In addition, it helps to assess the economic health of an area and plan for future developments. 

The primary research question we aim to answer is: What are the key factors that significantly influence house prices in Ames from 2006 to 2010? Sale price of the house is the response variable. Predictor variables include lot size, overall quality, year of construction, roof style, masonry veneer area, total basement area, central air conditioning, garage size, and value of miscellaneous feature. The hypothesis we state is that there is a statistically significant positive relationship between certain property characteristics (predictors) and the sale price of houses (response). This hypothesis will be tested using linear regression which is appropriate when there is a linear relationship between the response variable and predictor variables. We use scatter plots and correlation coefficients to check the assumption. Linear regression provides coefficients that quantify the relationship between each predictor and the response variable, making it easier to interpret the impact of each factor on house prices. Specifically, It will provide estimates of how much the sale price is expected to change with a one-unit change in each predictor variable, holding other variables constant. Our primary goal is to understand the impact of each predictor on house prices, so the focus should be on interpretability instead of precision/accuracy. 

@influencing analyzed the influence factors for market supply and demand of commodity housing, and established price influence factors analysis model based on multiple linear regression. The article studies influencing factors of house price using the same method, linear regression, as we do, providing an example of setting a linear regression on factors and house price.
In @range, authors develop a novel fuzzy linear regression framework using symmetric and asymmetric trapezoidal fuzzy numbers for determining the relationship of particular (non-) policy factors with the house prices. The article shows the relationship between policy factors and house price, which demonstrates a different aspect of our research question.
In the real estate industry, the price of property plays a crucial role in economic growth. The research @MLT attempts to predict the price of a house using MLTs. Here, the price of the property is predicted using Extreme Gradient (XG) boosting algorithm and hedonic regression pricing. Both XGBoost and hedonic pricing models use 13 variables as inputs to predict house prices. The article uses an alternative regression method to study the relationship between multiple factors and house price. 

In @sec-data, we introduce the source and overview of our dataset. Variables used in regression is explained in detail. Then, in @sec-ethics we talk about the data ethics. In @sec-results, we address the preliminary result plots and descriptions.

=======
The primary research question we aim to answer is: what are the key factors that significantly influence house prices in Ames from 2006 to 2010? Sale price of the house is the response variable. Predictor variables include area, overall quality index, year of construction, house facilities, and value of miscellaneous feature. The hypothesis we state is that there is a statistically significant linear relationship between certain property characteristics (predictors) and the sale price of houses (response). This hypothesis will be tested using linear regression, which would be appropriate in this case. We use residual plots and a Q-Q plot to check the assumption.

Linear regression provides coefficients that quantify the relationship between each predictor and the response variable, making it easier to interpret the impact of each factor on house prices. Specifically, it will provide estimates of how much the sale price is expected to change with a one-unit change in each predictor variable, holding other variables constant. Our primary goal is to understand the impact of each predictor on house prices, so the focus should be on interpretability instead of precision or accuracy.

We found several peer-reviewed articles that focus on similar problems with this paper. @influencing analyzed the influence factors for market supply and demand of commodity housing, and established price influence factors analysis model based on multiple linear regression. This article studies influencing factors of house price using linear regression as we do, providing an example how to set a linear regression on factors and house price.

In @range, authors develop a novel fuzzy linear regression framework using symmetric and asymmetric trapezoidal fuzzy numbers for determining the relationship of particular (non-) policy factors with the house prices. This article shows the relationship between policy factors and house price, which demonstrates a different aspect of our research question.

The research @MLT attempts to predict the price of a house using Extreme Gradient (XG) boosting algorithm and hedonic regression pricing with 13 variables as inputs to predict house prices. This article uses an alternative regression method to study the relationship between multiple factors and house price.

In @sec-data, we introduce the source and overview of our dataset. Variables used in regression is explained in detail. Then, in @sec-ethics, we talk about the data ethics. In @sec-results, we address the result of the regression model, plots that verifies the assumptions, and descriptions. Finally, group contribution of each of our team menber is stated in @sec-contribution.
>>>>>>> Stashed changes

# Data Description {#sec-data}

```{r}
#| include: false
#| warning: false
#| message: false

# Read data from cleaned data file
data <- read_csv(here::here("data", "cleaned_data.csv"))
```

```{r}
#| label: tbl-data
#| tbl-cap: Preview of Data
#| echo: false
#| warning: false
#| message: false

# Visualize part of the dataset
kable(head(data), format = "markdown")
```

The Ames Housing dataset (@tbl-data) was sourced from the `AmesHousing` package (@ameshousing) in R (@citeR). It was originally compiled by the Ames City Assessor's Office through a comprehensive data dump of property tax records from 2006 to 2010, and it aimed to document residential property sales (@ames). The dataset was initially designed for property tax assessments and general valuation, focusing on property characteristics such as lot area, the year built, and sale price. In contrast, this research aims to analyze how various property features influence house prices in Ames.

The dataset consists of 2930 observations and 82 variables relevant to understanding housing market dynamics. It was cleaned using `tidyverse` package (@tidyverse). After cleaning, we selected 1 response variable, `sale_price`, and 9 predictor variables: `lot_area`, `overall_qual`, `year_built`, `roof_style`, `mas_vnr_area`, `total_bsmt_sf`, `central_air`, `garage_area`, and `misc_val`.

#TODO: explain variables

These predictor variables all show the quality of the house, which will affect the price of the house directly. So, we believe there is a linear relationship between these predictor variables and the response variable.

The variability in `lot_area` and the distribution of the `year_built` variable indicate interesting trends that warrant further exploration.# By analyzing these variables, this study aims to provide insights into how specific property characteristics affect housing prices in Ames, Iowa.

# Ethics Discussion {#sec-ethics}

<<<<<<< Updated upstream
Our data is collected from @amehousing, then we cleaned the data to keep some keey factors we want. Raw and processed versions of the data from De Cock published on Journal of Statistics Education in 2011. More detailed information about source of data is described in @sec-data.Stakeholders of our analysis including homeowners, potential buyers, real estate agents, and policymakers. 
=======
Our data is collected from Ames City Assessor's Office (@ames), then we cleaned the data to only keep some necessary key factors that is highly relavant to house prices. Raw and processed versions of the data from De Cock is published on Journal of Statistics Education in 2011. More detailed information about source of data is described in @sec-data. The cleaned data we are using includes some detailed information about housing characteristics, but does not contain personal identifiers. The analysis can provide deeper insights for stakeholders, including homeowners, potential buyers, real estate agents, and policymakers, to make better decisionsabout buying, selling and investing in real estate. The Ames housing dataset has gained popularity, especially in the context of academic projects and machine learning competitions. It is often considered a modern alternative to the Boston Housing dataset. The dataset is well-vetted and trusted by the data science community for its comprehensiveness and relevance.
>>>>>>> Stashed changes

# Preliminary Results {#sec-results}

```{r}
#| echo: false
#| warning: false
#| message: false

# Convert variables to factors
data$central_air <- as.factor(data$central_air)
data$roof_style <- as.factor(data$roof_style)

# Fit the linear model
model <- lm(sale_price ~
              lot_area + overall_qual + year_built + roof_style +
              mas_vnr_area + total_bsmt_sf + central_air + garage_area +
              misc_val, data = data)
```

```{r}
#| label: fig-resid
#| fig-cap: Residual Plot
#| echo: false
#| warning: false
#| message: false

# Residual Plot
ggplot(data, aes(x = fitted(model), y = resid(model))) +
  geom_point() +
<<<<<<< Updated upstream
  geom_hline(yintercept = 0, col = "red") +
=======
  geom_hline(yintercept = 0, col = "red") +  # Add a horizontal line at 0
  xlab("Predictor") +
  ylab("Residuals") +
  ggtitle("Residuals vs. Predictor") +
  theme_minimal()
```

We plotted residuals against observation order to test uncorrelated errors. If errors are uncorrelated, residuals should scatter randomly around the horizontal axis without any clear pattern. From @fig-resid, we can see that residuals appear to be randomly distributed across observations, which satisfy the assumption of independence in the linear regression model. But there still have some larger residuals, we can regard these points as potential outliers.

```{r}
#| label: fig-constant-variance
#| fig-cap: Constant variance testing
#| echo: false
#| warning: false
#| message: false

fitted_values <- fitted(model)
residuals <- resid(model)

# Create a data frame with fitted values and residuals
residuals_df <- data.frame(fitted_values = fitted_values, residuals = residuals)

# Plot Residuals vs Fitted values to check for constant variance
ggplot(residuals_df, aes(x = fitted_values, y = residuals)) +
  geom_point() +
  geom_smooth(method = "loess", color = "red", se = FALSE) +
  geom_hline(yintercept = 0, color = "blue") +
>>>>>>> Stashed changes
  xlab("Fitted Values") +
  ylab("Residuals")
```

```{r}
#| label: fig-qq
#| fig-cap: Q-Q Plot
#| echo: false
#| warning: false
#| message: false

# QQ plot
qqnorm(resid(model))
qqline(resid(model), col = "red")
```

\newpage

\appendix

# Appendix

## Contributions {#sec-contribution}

Yanzun Jiang: Organized discussions and meetings; set up Github workspace for collaborating; downloaded data for setting up the linear regression model; cleaned data to make further analysis easier; completed @sec-data in the proposal; made the reference list; revised and combined group member's work together.

Siyuan Lu: Introduce the paper. Set primary research question and hypothesis. Gather peer-review articles and relate them back to our paper. Check data ethics.

Yi Tang: Built linear regression model to predict house sale prices by using five key predictors in cleaned data. It assisted to understand the relationship between variables and ensure data meets key assumptions for statistical validity.

\newpage

# References
